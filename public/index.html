<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale-1.0" />
		<title>Attendance Tracker</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="style.css" />
		<link rel="manifest" href="manifest.json" />
		<link rel="apple-touch-icon" href="images/icon-192x192.png" />
		<meta name="theme-color" content="#ffffff" />
	</head>
	<body class="bg-gray-100 font-sans">
		<div id="app-container" class="max-w-4xl mx-auto p-4 sm:p-6">
			<!-- Header -->
			<header class="flex justify-between items-center mb-6">
				<h1 class="text-2xl sm:text-3xl font-bold text-gray-800">
					Attendance Tracker
				</h1>
				<div id="user-info" class="hidden items-center gap-3">
					<img
						id="user-photo"
						class="w-10 h-10 rounded-full"
						alt="User photo"
					/>
					<button
						id="logout-btn"
						class="px-4 py-2 bg-red-500 text-white rounded-lg shadow hover:bg-red-600 transition-colors text-sm"
					>
						Logout
					</button>
				</div>
			</header>

			<main>
				<!-- Login View -->
				<div id="login-view" class="view active text-center py-10">
					<div
						class="bg-white p-8 rounded-xl shadow-md max-w-sm mx-auto"
					>
						<h2 class="text-2xl font-bold mb-2 text-gray-700">
							Welcome!
						</h2>
						<p class="text-gray-500 mb-6">
							Sign in to track your attendance.
						</p>
						<button
							id="login-btn"
							class="w-full flex items-center justify-center gap-3 px-4 py-3 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-all"
						>
							<svg
								class="w-6 h-6"
								xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 48 48"
							>
								<path
									fill="#FFC107"
									d="M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"
								/>
								<path
									fill="#FF3D00"
									d="M6.306 14.691c-1.321 2.352-2.096 5.09-2.096 8.016s.775 5.664 2.096 8.016l-5.657 5.657C.138 32.65 0 28.485 0 24c0-4.486.138-8.65.95-12.348l5.356 2.043z"
								/>
								<path
									fill="#4CAF50"
									d="M24 48c5.166 0 9.86-1.977 13.409-5.192l-5.657-5.657C30.046 38.023 27.21 39 24 39c-5.218 0-9.657-3.356-11.303-7.962l-5.657 5.657C9.043 42.023 15.957 48 24 48z"
								/>
								<path
									fill="#1976D2"
									d="M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l5.657 5.657C39.833 34.61 44 29.873 44 24c0-1.341-.138-2.65-.389-3.917z"
								/>
							</svg>
							Sign In with Google
						</button>
					</div>
				</div>

				<!-- Loader View -->
				<div id="loader-view" class="view text-center py-20">
					<div class="loader"></div>
				</div>

				<!-- Setup View -->
				<div id="setup-view" class="view">
					<div class="bg-white p-6 rounded-xl shadow-md">
						<h2 class="text-2xl font-bold mb-4 text-gray-800">
							Semester Setup
						</h2>
						<form id="setup-form" class="space-y-6">
							<div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
								<div>
									<label
										for="start-date"
										class="block text-sm font-medium text-gray-700"
										>Start Date</label
									>
									<input
										type="date"
										id="start-date"
										required
										class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
									/>
								</div>
								<div>
									<label
										for="end-date"
										class="block text-sm font-medium text-gray-700"
										>End Date</label
									>
									<input
										type="date"
										id="end-date"
										required
										class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
									/>
								</div>
							</div>
							<div>
								<label
									for="subjects"
									class="block text-sm font-medium text-gray-700"
									>Subjects (comma-separated)</label
								>
								<input
									type="text"
									id="subjects"
									placeholder="e.g., Physics, Maths, Chemistry"
									required
									class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
								/>
							</div>

							<!-- NEW: Weekend Configuration -->
							<div>
								<h3
									class="text-lg font-medium text-gray-800 mb-2"
								>
									Weekend Configuration
								</h3>
								<div
									id="weekend-container"
									class="flex flex-wrap gap-x-4 gap-y-2"
								>
									<!-- Weekend checkboxes will be generated here -->
								</div>
							</div>

							<div>
								<h3
									class="text-lg font-medium text-gray-800 mb-2"
								>
									Weekly Schedule
								</h3>
								<div id="schedule-container" class="space-y-3">
									<!-- Schedule inputs will be generated here -->
								</div>
							</div>
							<div class="text-right">
								<button
									type="submit"
									class="px-6 py-2 bg-blue-500 text-white rounded-lg shadow hover:bg-blue-600 transition-colors"
								>
									Save Settings
								</button>
							</div>
						</form>
					</div>
				</div>

				<!-- Dashboard View -->
				<div id="dashboard-view" class="view space-y-6">
					<div class="bg-white p-6 rounded-xl shadow-md">
						<div
							class="flex flex-col sm:flex-row justify-between sm:items-center gap-2 mb-4"
						>
							<div>
								<h2 class="text-2xl font-bold text-gray-800">
									Dashboard
								</h2>
								<p
									id="semester-name"
									class="text-sm text-gray-500"
								></p>
							</div>
							<button
								id="edit-semester-btn"
								class="text-sm px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"
							>
								Edit Semester
							</button>
						</div>

						<div
							class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center"
						>
							<div class="p-4 bg-blue-50 rounded-lg">
								<p class="text-sm text-blue-800">
									Overall Attendance
								</p>
								<p
									id="overall-attendance-percent"
									class="text-2xl font-bold text-blue-900"
								>
									--%
								</p>
							</div>
							<div class="p-4 bg-green-50 rounded-lg">
								<p class="text-sm text-green-800">
									Semester Bunks Left
								</p>
								<p
									id="semester-bunks-left"
									class="text-2xl font-bold text-green-900"
								>
									--
								</p>
							</div>
							<div class="p-4 bg-yellow-50 rounded-lg">
								<p class="text-sm text-yellow-800">
									Monthly Bunks Left
								</p>
								<p
									id="monthly-bunks-left"
									class="text-2xl font-bold text-yellow-900"
								>
									--
								</p>
							</div>
						</div>
					</div>

					<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
						<div
							class="bg-white p-6 rounded-xl shadow-md space-y-4"
						>
							<div
								class="flex flex-col sm:flex-row justify-between sm:items-center gap-2"
							>
								<h3 class="text-xl font-bold text-gray-800">
									Daily Attendance
								</h3>
								<div class="flex items-center gap-2">
									<button
										id="prev-day-btn"
										class="p-2 rounded-md bg-gray-100 hover:bg-gray-200 transition-colors"
										aria-label="Previous day"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											width="16"
											height="16"
											fill="currentColor"
											viewBox="0 0 16 16"
										>
											<path
												fill-rule="evenodd"
												d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"
											/>
										</svg>
									</button>
									<input
										type="date"
										id="date-picker"
										class="border-gray-300 rounded-md shadow-sm text-sm p-1.5 bg-gray-50"
									/>
									<button
										id="next-day-btn"
										class="p-2 rounded-md bg-gray-100 hover:bg-gray-200 transition-colors"
										aria-label="Next day"
									>
										<svg
											xmlns="http://www.w3.org/2000/svg"
											width="16"
											height="16"
											fill="currentColor"
											viewBox="0 0 16 16"
										>
											<path
												fill-rule="evenodd"
												d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"
											/>
										</svg>
									</button>
								</div>
							</div>
							<div
								id="lectures-container"
								class="space-y-3 max-h-96 overflow-y-auto pr-2"
							>
								<!-- Lectures will be generated here -->
							</div>
							<!-- NEW: Holiday and Leave Buttons -->
							<div class="grid grid-cols-2 gap-3 mt-2">
								<button
									id="holiday-btn"
									class="w-full px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors text-sm font-semibold"
								>
									Mark as Holiday
								</button>
								<button
									id="mark-day-leave-btn"
									class="w-full px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors text-sm font-semibold"
								>
									Mark as Leave
								</button>
							</div>
						</div>

						<div
							class="bg-white p-6 rounded-xl shadow-md space-y-4"
						>
							<h3 class="text-xl font-bold text-gray-800">
								Subject-wise Stats
							</h3>
							<div id="subject-stats-container" class="space-y-4">
								<!-- Subject stats will be generated here -->
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>

		<!-- Confirmation Modal -->
		<div
			id="confirmation-modal"
			class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"
		>
			<div class="bg-white rounded-lg shadow-xl max-w-sm w-full p-6">
				<h3 id="modal-title" class="text-lg font-bold text-gray-800">
					Confirmation
				</h3>
				<p id="modal-message" class="text-sm text-gray-600 mt-2">
					Are you sure?
				</p>
				<div class="mt-6 flex justify-end gap-3">
					<button
						id="modal-cancel-btn"
						class="px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300"
					>
						Cancel
					</button>
					<button
						id="modal-confirm-btn"
						class="px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600"
					>
						Confirm
					</button>
				</div>
			</div>
		</div>

		<script type="module" src="script.js"></script>
	</body>
</html>
