<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Attendance Tracker</title>
		<script src="https://cdn.tailwindcss.com"></script>

		<!-- Import Inter font from Google Fonts -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<!-- Configure Tailwind CSS to use the Inter font -->
		<script>
			tailwind.config = {
				theme: {
					extend: {
						fontFamily: {
							sans: ["Inter", "sans-serif"],
						},
					},
				},
			};
		</script>

		<link rel="stylesheet" href="style.css" />
		<link rel="manifest" href="manifest.json" />
		<link rel="apple-touch-icon" href="/icons/icon-192x192.png" />
		<meta name="theme-color" content="#4F46E5" />
		<style>
			.view {
				display: none;
			}
			.view.active {
				display: block;
			}
		</style>
	</head>
	<body class="bg-gray-100 font-sans">
		<div id="app-container" class="max-w-4xl mx-auto p-4 md:p-6">
			<header class="flex justify-between items-center mb-6">
				<h1 class="text-2xl md:text-3xl font-bold text-gray-800">
					Attendance Tracker
				</h1>
				<div id="user-info" class="hidden items-center gap-3">
					<img
						id="user-photo"
						class="w-10 h-10 rounded-full"
						alt="User photo"
					/>
					<button
						id="logout-btn"
						class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
					>
						Logout
					</button>
				</div>
			</header>

			<main>
				<!-- Login View -->
				<div id="login-view" class="view active text-center py-12">
					<div
						class="bg-white p-8 rounded-xl shadow-md max-w-sm mx-auto"
					>
						<h2 class="text-xl font-semibold text-gray-700 mb-2">
							Welcome!
						</h2>
						<p class="text-gray-500 mb-6">
							Please log in with your Google account to track your
							attendance.
						</p>
						<button
							id="login-btn"
							class="w-full flex items-center justify-center gap-3 px-4 py-3 font-semibold text-white bg-indigo-600 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
						>
							<svg
								class="w-5 h-5"
								viewBox="0 0 48 48"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M43.6113 20.0833H42V20H24V28H35.3033C33.655 31.64 30.0733 34 24 34C17.455 34 12 28.545 12 22C12 15.455 17.455 10 24 10C27.3017 10 30.245 11.3367 32.4783 13.4517L38.4983 7.43167C34.6233 3.87333 29.71 2 24 2C13.51 2 5 10.51 5 21C5 31.49 13.51 40 24 40C34.49 40 43 31.49 43 21C43 20.5333 42.9467 20.0833 42.8867 19.6417L43.6113 20.0833Z"
									fill="#FFC107"
								/>
								<path
									d="M6.30667 14.6917L12.4783 19.2367C13.8417 15.6367 16.73 13 20.2433 11.5217L14.2217 5.50167C10.84 8.24333 8.01333 11.83 6.30667 14.6917Z"
									fill="#FF3D00"
								/>
								<path
									d="M24 48C37.255 48 48 37.255 48 24C48 10.745 37.255 0 24 0C10.745 0 0 10.745 0 24C0 37.255 10.745 48 24 48Z"
									fill="url(#paint0_linear)"
								></path>
								<path
									d="M43.6113 20.0833H42V20H24V28H35.3033C33.655 31.64 30.0733 34 24 34C17.455 34 12 28.545 12 22C12 15.455 17.455 10 24 10C27.3017 10 30.245 11.3367 32.4783 13.4517L38.4983 7.43167C34.6233 3.87333 29.71 2 24 2C13.51 2 5 10.51 5 21C5 31.49 13.51 40 24 40C34.49 40 43 31.49 43 21C43 20.5333 42.9467 20.0833 42.8867 19.6417L43.6113 20.0833Z"
									fill="white"
								/>
							</svg>
							Sign in with Google
						</button>
					</div>
				</div>

				<!-- Loader View -->
				<div id="loader-view" class="view text-center py-12">
					<div class="loader"></div>
					<p class="mt-4 text-gray-600">Loading your data...</p>
				</div>

				<!-- Setup View -->
				<div id="setup-view" class="view">
					<div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
						<h2 class="text-xl font-semibold text-gray-800 mb-4">
							Semester Setup
						</h2>
						<form id="setup-form" class="space-y-4">
							<div class="grid grid-cols-1 md:grid-cols-2 gap-4">
								<div>
									<label
										for="start-date"
										class="block text-sm font-medium text-gray-700"
										>Start Date</label
									>
									<input
										type="date"
										id="start-date"
										required
										class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
									/>
								</div>
								<div>
									<label
										for="end-date"
										class="block text-sm font-medium text-gray-700"
										>End Date</label
									>
									<input
										type="date"
										id="end-date"
										required
										class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
									/>
								</div>
							</div>
							<div>
								<label
									for="subjects"
									class="block text-sm font-medium text-gray-700"
									>Subjects (comma-separated)</label
								>
								<input
									type="text"
									id="subjects"
									placeholder="e.g., Maths, Physics, Chemistry"
									required
									class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"
								/>
							</div>
							<div>
								<label
									class="block text-sm font-medium text-gray-700 mb-2"
									>Select Weekend Days</label
								>
								<div
									id="weekend-container"
									class="flex flex-wrap gap-x-4 gap-y-2"
								>
									<!-- Weekend checkboxes will be rendered here -->
								</div>
							</div>
							<div>
								<h3
									class="text-lg font-medium text-gray-800 mb-2"
								>
									Daily Lecture Schedule
								</h3>
								<div id="schedule-container" class="space-y-3">
									<!-- Schedule inputs will be rendered here -->
								</div>
							</div>
							<div class="text-right">
								<button
									type="submit"
									class="px-6 py-2 font-semibold text-white bg-indigo-600 rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
								>
									Save Settings
								</button>
							</div>
						</form>
					</div>
				</div>

				<!-- Dashboard View -->
				<div id="dashboard-view" class="view">
					<div class="bg-white p-6 md:p-8 rounded-xl shadow-md mb-6">
						<div
							class="flex flex-col md:flex-row justify-between md:items-center gap-4 mb-6"
						>
							<div>
								<h2
									class="text-xl font-bold text-gray-800"
									id="semester-name"
								></h2>
								<p class="text-gray-500">
									Overall Attendance:
									<span
										id="overall-attendance-percent"
										class="font-semibold"
									></span>
								</p>
							</div>
							<div class="flex items-center gap-2 text-sm">
								<div
									class="p-3 rounded-lg bg-green-50 border border-green-200 text-center"
								>
									<p
										class="font-bold text-lg text-green-700"
										id="semester-bunks-left"
									></p>
									<p class="text-green-600">
										Semester Bunks Left
									</p>
								</div>
								<div
									class="p-3 rounded-lg bg-blue-50 border border-blue-200 text-center"
								>
									<p
										class="font-bold text-lg text-blue-700"
										id="monthly-bunks-left"
									></p>
									<p class="text-blue-600">
										Monthly Bunks Left
									</p>
								</div>
							</div>
							<button
								id="edit-semester-btn"
								class="px-4 py-2 text-sm font-medium text-indigo-600 bg-indigo-100 rounded-lg hover:bg-indigo-200"
							>
								Edit Semester
							</button>
						</div>
						<div
							id="subject-stats-container"
							class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"
						>
							<!-- Subject stats will be rendered here -->
						</div>
					</div>

					<div class="bg-white p-6 md:p-8 rounded-xl shadow-md">
						<div
							class="flex flex-col md:flex-row justify-between items-center mb-4 gap-3"
						>
							<div class="flex items-center gap-2">
								<button
									id="prev-day-btn"
									class="p-2 rounded-full hover:bg-gray-200"
								>
									&lt;
								</button>
								<input
									type="date"
									id="date-picker"
									class="border-gray-300 rounded-md shadow-sm"
								/>
								<button
									id="next-day-btn"
									class="p-2 rounded-full hover:bg-gray-200"
								>
									&gt;
								</button>
							</div>
							<div class="flex flex-wrap gap-2 justify-center">
								<button
									id="edit-day-schedule-btn"
									class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300"
								>
									Edit Schedule
								</button>
								<button
									id="holiday-btn"
									class="px-4 py-2 text-sm font-medium text-yellow-800 bg-yellow-100 rounded-lg hover:bg-yellow-200"
								>
									Mark as Holiday
								</button>
								<button
									id="mark-day-leave-btn"
									class="px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600"
								>
									Mark Day as Leave
								</button>
							</div>
						</div>
						<div id="lectures-container" class="space-y-3">
							<!-- Lectures for the selected day will be rendered here -->
						</div>
					</div>
				</div>

				<!-- Confirmation Modal -->
				<div
					id="confirmation-modal"
					class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"
				>
					<div
						class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"
					>
						<div class="mt-3 text-center">
							<h3
								class="text-lg leading-6 font-medium text-gray-900"
								id="modal-title"
							></h3>
							<div class="mt-2 px-7 py-3">
								<p
									class="text-sm text-gray-500"
									id="modal-message"
								></p>
							</div>
							<div class="items-center px-4 py-3">
								<button
									id="modal-cancel-btn"
									class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 mr-2"
								>
									Cancel
								</button>
								<button
									id="modal-confirm-btn"
									class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600"
								>
									Confirm
								</button>
							</div>
						</div>
					</div>
				</div>

				<!-- Override Schedule Modal -->
				<div
					id="override-schedule-modal"
					class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"
				>
					<div
						class="relative top-10 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white"
					>
						<div class="mt-3">
							<h3
								class="text-lg leading-6 font-medium text-gray-900 text-center"
								id="override-modal-title"
							>
								Edit Schedule
							</h3>
							<div
								class="mt-4 px-2 py-3 space-y-4"
								id="override-schedule-container"
							>
								<!-- Override schedule inputs will be rendered here -->
							</div>
							<div class="items-center px-4 py-3 sm:flex">
								<button
									id="override-modal-cancel-btn"
									class="w-full inline-flex justify-center rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue transition ease-in-out duration-150 sm:text-sm sm:leading-5"
								>
									Cancel
								</button>
								<button
									id="override-modal-save-btn"
									class="mt-3 w-full inline-flex justify-center rounded-md border border-transparent px-4 py-2 bg-indigo-600 text-base leading-6 font-medium text-white shadow-sm hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo transition ease-in-out duration-150 sm:mt-0 sm:ml-3 sm:text-sm sm:leading-5"
								>
									Save Schedule
								</button>
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>

		<!-- Load Firebase SDKs first -->
		<!-- These are the "compat" libraries that work with the init.js script -->
		<script src="/__/firebase/9.6.1/firebase-app-compat.js"></script>
		<script src="/__/firebase/9.6.1/firebase-auth-compat.js"></script>
		<script src="/__/firebase/9.6.1/firebase-firestore-compat.js"></script>

		<!-- This script is auto-generated by Firebase Hosting and initializes Firebase -->
		<script src="/__/firebase/init.js"></script>

		<!-- Your app's logic, loaded last -->
		<script type="module" src="script.js"></script>
	</body>
</html>
